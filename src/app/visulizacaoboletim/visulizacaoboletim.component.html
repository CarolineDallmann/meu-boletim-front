<app-layout-principal [hiddenMenu]="true" title="Boletim">
    <app-card-filtro>

        <mat-grid-list cols="4" rowHeight="60px">
            <mat-grid-tile colspan="1">
                <mat-form-field appearance="legacy">
                    <mat-label>Aluno</mat-label>
                    <mat-select (selectionChange)="onAlunoChange($event.value)" [value]="alunoSelecionado">
                        <mat-option *ngFor="let aluno of alunos" [value]="aluno">
                            {{aluno.nome | titlecase}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile colspan="2"></mat-grid-tile>

            <mat-grid-tile colspan="1">
                <app-button>Sair
                </app-button>
            </mat-grid-tile>
        </mat-grid-list>

    </app-card-filtro>
    <app-card-conteudo>
        <div class="cabecalho">
            <mat-form-field appearance="outline">
                <mat-label> Série </mat-label>
                <input matInput [value]="alunoSelecionado?.serie | serieDePara" readonly>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label> Turma </mat-label>
                <input matInput [value]="alunoSelecionado?.turma | uppercase" readonly>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label> Turno </mat-label>
                <input matInput [value]="alunoSelecionado?.turno  | titlecase" readonly>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label> Ano </mat-label>
                <input matInput [value]=" anoLetivo?.toString()" readonly>
            </mat-form-field>
        </div>

        <table mat-table [dataSource]="boletim">
            <ng-container matColumnDef="disciplina">
                <th mat-header-cell *matHeaderCellDef rowspan="2"> Disciplina </th>
            </ng-container>

            <ng-container matColumnDef="1bim">
                <th mat-header-cell *matHeaderCellDef colspan="2"> 1° Bimestre
                    <p>{{fechamentos.bim1}}</p>
                </th>
            </ng-container>

            <ng-container matColumnDef="2bim">
                <th mat-header-cell *matHeaderCellDef colspan="2"> 2° Bimestre
                    <p>{{fechamentos.bim2}}</p>
                </th>
            </ng-container>

            <ng-container matColumnDef="3bim">
                <th mat-header-cell *matHeaderCellDef colspan="2"> 3° Bimestre
                    <p>{{fechamentos.bim3}}</p>
                </th>
            </ng-container>

            <ng-container matColumnDef="4bim">
                <th mat-header-cell *matHeaderCellDef colspan="2"> 4° Bimestre
                    <p>{{fechamentos.bim4}}</p>
                </th>
            </ng-container>

            <ng-container matColumnDef="final">
                <th mat-header-cell *matHeaderCellDef colspan="2"> Avaliação Final
                    <p>{{fechamentos.final | resultadoBoletim}}</p>
                </th>
            </ng-container>

            <ng-container matColumnDef="d">
                <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> Nota </th>
                <td mat-cell *matCellDef="let linha">{{linha.materia}}</td>
            </ng-container>

            <ng-container matColumnDef="1nota">
                <th mat-header-cell *matHeaderCellDef> Nota </th>
                <td mat-cell *matCellDef="let linha" [class]="linha.notaBim1 | checkNota: configEscola : 1">
                    {{linha.notaBim1 | number : '1.2'}}</td>
            </ng-container>

            <ng-container matColumnDef="2nota">
                <th mat-header-cell *matHeaderCellDef> Nota </th>
                <td mat-cell *matCellDef="let linha" [class]="linha.notaBim2 | checkNota: configEscola : 2">
                    {{linha.notaBim2 | number : '1.2'}}</td>
            </ng-container>

            <ng-container matColumnDef="3nota">
                <th mat-header-cell *matHeaderCellDef> Nota </th>
                <td mat-cell *matCellDef="let linha" [class]="linha.notaBim3 | checkNota: configEscola : 3">
                    {{linha.notaBim3 | number : '1.2'}}</td>
            </ng-container>

            <ng-container matColumnDef="4nota">
                <th mat-header-cell *matHeaderCellDef> Nota </th>
                <td mat-cell *matCellDef="let linha" [class]="linha.notaBim4 | checkNota: configEscola : 4">
                    {{linha.notaBim4 | number : '1.2'}}</td>
            </ng-container>

            <ng-container matColumnDef="1falta">
                <th mat-header-cell *matHeaderCellDef> Falta</th>
                <td mat-cell *matCellDef="let linha">{{linha.qtdeFaltaBim1}}</td>
            </ng-container>

            <ng-container matColumnDef="2falta">
                <th mat-header-cell *matHeaderCellDef> Falta </th>
                <td mat-cell *matCellDef="let linha">{{linha.qtdeFaltaBim2}}</td>
            </ng-container>

            <ng-container matColumnDef="3falta">
                <th mat-header-cell *matHeaderCellDef> Falta </th>
                <td mat-cell *matCellDef="let linha">{{linha.qtdeFaltaBim3}}</td>
            </ng-container>

            <ng-container matColumnDef="4falta">
                <th mat-header-cell *matHeaderCellDef> Falta </th>
                <td mat-cell *matCellDef="let linha">{{linha.qtdeFaltaBim4}}</td>
            </ng-container>

            <ng-container matColumnDef="media">
                <th mat-header-cell *matHeaderCellDef> Média Final </th>
                <td mat-cell *matCellDef="let linha">{{linha.mediaFinal | number : '1.0-2'}}</td>
            </ng-container>

            <ng-container matColumnDef="resultado">
                <th mat-header-cell *matHeaderCellDef> Resultado </th>
                <td mat-cell *matCellDef="let linha">{{linha.resultado | resultadoBoletim}}</td>
            </ng-container>



            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-header-row *matHeaderRowDef="displayedSubColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedSubColumns"></tr>
        </table>


    </app-card-conteudo>
</app-layout-principal>